(this.webpackJsonptetori=this.webpackJsonptetori||[]).push([[0],{382:function(e,t,n){},383:function(e,t,n){},384:function(e,t,n){},387:function(e,t,n){},388:function(e,t,n){"use strict";n.r(t);var c=n(1),a=(n(173),n(2)),i=n.n(a),s=n(88),r=n.n(s),o=(n(382),n(383),n(168)),l=n(21);n(384);function u(e){var t,n,i=e.contents,s=e.pos,r=e.updatePos,o=Object(a.useState)(!0),u=Object(l.a)(o,2),d=u[0],j=u[1];return Object(c.jsxs)("div",{className:"dialog",children:[Object(c.jsx)("button",{onClick:function(){return j(!d)},children:"Prev ".concat(d?"\u25b2":"\u25bc")}),Object(c.jsx)("p",{className:"previous-dialog",title:"\u30af\u30ea\u30c3\u30af\u3067\u524d\u3078",hidden:d,onClick:function(e){e.currentTarget.scrollTop=0,void 0!==i[s-1]&&r("\u30da\u30fc\u30b8".concat(s-1),{pos:s-1})},children:null!==(t=i[s-1])&&void 0!==t?t:"NA"}),Object(c.jsx)("p",{className:"next-dialog",title:"\u30af\u30ea\u30c3\u30af\u3067\u6b21\u3078",onClick:function(e){e.currentTarget.scrollTop=0,void 0!==i[s+1]&&r("\u30da\u30fc\u30b8".concat(s+1),{pos:s+1})},children:null!==(n=i[s])&&void 0!==n?n:"NA"})]})}var d=n(166),j=n(391),b=n(392);function p(e){var t=Object(a.useRef)(null),n=Object(a.useRef)(null);function i(t){t&&e.apply(t)}return Object(c.jsxs)("ul",{children:[Object(c.jsx)("li",{children:Object(c.jsxs)("label",{children:[Object(c.jsx)("button",{onClick:function(){var e,n=null===(e=t.current)||void 0===e?void 0:e.files;if(n){var c=n[0];if(c){var a=new FileReader;a.addEventListener("load",(function(){var e=this.result;"string"===typeof e&&i(e)})),a.readAsDataURL(c)}}},children:e.text}),Object(c.jsx)("input",{ref:t,type:"file",accept:"image/png,image/jpeg"})]})}),Object(c.jsx)("li",{children:Object(c.jsxs)("label",{children:[Object(c.jsx)("button",{onClick:function(){var e,t=null===(e=n.current)||void 0===e?void 0:e.value;t&&0!==t.length&&i(t)},children:e.text}),Object(c.jsx)("input",{ref:n,type:"text",placeholder:"https://..."})]})})]})}var x="text";function h(e){var t=e.note,n=e.editNote,a=e.index;return Object(c.jsx)("textarea",{value:t.text,onChange:function(e){return n({text:e.target.value})},className:"box",style:{width:t.w,height:t.h,zIndex:a}})}function g(e){var t=e.note,n=e.index;return Object(c.jsx)("div",{className:"box",draggable:!1,style:{width:t.w,height:t.h,zIndex:n,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundImage:"url(".concat(t.url,")")}})}function O(e){var t=e.editNote,n=e.index,a=e.note;if(function(e){return"text"===e.type}(a))return Object(c.jsx)(h,{note:a,editNote:t,index:n});if(function(e){return"image"===e.type}(a))return Object(c.jsx)(g,{note:a,editNote:t,index:n});throw new Error}function f(e){var t=e.note,n=e.index,i=e.remove,s=e.editNote,r=Object(j.a)({item:{x:t.x,y:t.y,id:n,type:x}}),o=Object(l.a)(r,2)[1],u=Object(a.useRef)();return Object(c.jsxs)("div",{className:"draggable-wrapper",style:{left:t.x,top:t.y},children:[Object(c.jsxs)("div",{className:"note-navigation",children:[Object(c.jsx)("div",{ref:o,className:"drag-handle",title:"\u30c9\u30e9\u30c3\u30b0\u3067\u52d5\u304b\u3059"}),Object(c.jsx)("button",{className:"close-button",onClick:i,title:"\u9589\u3058\u308b"})]}),Object(c.jsx)(d.a,{onResize:function(e){t.h===e.height&&t.w===e.width||(u.current&&clearTimeout(u.current),u.current=setTimeout((function(){s({h:e.height,w:e.width})}),1e3))},children:Object(c.jsx)(O,{note:t,editNote:s,index:n})})]})}var v=function(){};function m(e){var t,n,a=null!==(t=e.remove)&&void 0!==t?t:v,i=null!==(n=e.editNote)&&void 0!==n?n:v;return Object(c.jsx)("div",{className:"pane",children:e.notes.map((function(e,t){return Object(c.jsx)(f,{index:t,note:e,remove:function(){return a(t)},editNote:i.bind(void 0,t)},e.key)}))})}function y(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),i=n[0],s=n[1];return Object(c.jsxs)("aside",{className:"palette",children:[Object(c.jsx)("button",{onClick:function(){return s(!i)},children:"".concat(i?"\u958b\u304f":"\u6700\u5c0f\u5316")}),Object(c.jsx)("h1",{children:"\u30d1\u30ec\u30c3\u30c8"}),Object(c.jsxs)("ul",{hidden:i,children:[Object(c.jsx)("li",{onClick:function(){return e.createNote({type:"text",text:"",x:0,y:0,w:300,h:300})},children:"\u30c6\u30ad\u30b9\u30c8"}),Object(c.jsx)("li",{children:Object(c.jsx)(p,{text:"\u753b\u50cf",apply:function(t){var n=new Image;n.src=t,n.onload=function(){var c=n.naturalWidth,a=n.naturalHeight;c<=a?500<a&&(c=500*c/a,a=500):500<c&&(a=500*a/c,c=500),e.createNote({type:"image",url:t,x:0,y:0,h:a,w:c})}}})})]})]})}function k(){for(var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".split(""),t=0,n=e.length;t<n;t++)switch(e[t]){case"x":e[t]=Math.floor(16*Math.random()).toString(16);break;case"y":e[t]=(Math.floor(4*Math.random())+8).toString(16)}return e.join("")}function N(e){var t=e.pane,n=e.editPane,i=Object(a.useCallback)((function(e){n(t.concat([Object.assign({},e,{key:k()})]))}),[n,t]),s=Object(a.useCallback)((function(e,c){var a=t.slice(),i=Object.assign({},a.splice(e,1)[0],c);n(a.concat([i]))}),[n,t]),r=Object(a.useCallback)((function(e){var c=t.slice();c.splice(e,1),n(c)}),[n,t]),o=Object(b.a)({accept:[x],drop:function(e,t){var n=e.id,c=e.x,a=e.y,i=t.getDifferenceFromInitialOffset()||{x:0,y:0},r=i.x,o=i.y,l=Math.round(c+r),u=Math.round(a+o);s(n,{x:l,y:u})}}),u=Object(l.a)(o,2)[1];return Object(c.jsxs)("div",{className:"pane-editor",ref:u,children:[Object(c.jsx)(m,{notes:t,remove:r,editNote:s}),Object(c.jsx)(y,{createNote:i})]})}var w=n(390),C=n(167);n(387);function E(e){var t,n,i,s,r,o,d=e.panes,j=e.pages,b=e.dispatchEditMessage,x=e.pos,h=Object(a.useCallback)((function(e,t){var n=t.pos,c=t.pane,a=t.page,i=Object.assign({},j[x],a),s=j.slice();s[x]=i,b({type:"edit",message:e,snapshot:{pages:s,panes:c?d.concat([c]):d,pos:null!==n&&void 0!==n?n:x}})}),[b,j,d,x]),g=Object(a.useCallback)((function(e){return h("Pane\u306e\u7de8\u96c6",{page:{pane:d.length},pane:e})}),[d.length,h]),O=Object(a.useState)(!0),f=Object(l.a)(O,2),v=f[0],y=f[1];return Object(c.jsxs)("div",{children:[Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{type:"checkbox",checked:v,onChange:function(e){return y(e.target.checked)}}),"\u7de8\u96c6\u30e2\u30fc\u30c9"]}),Object(c.jsx)(p,{apply:function(e){h("\u80cc\u666f\u753b\u50cf\u3092\u8a2d\u5b9a",{page:{backgroundImage:e}})},text:"\u80cc\u666f\u753b\u50cf"}),Object(c.jsxs)("div",{className:"tetori ".concat(v?"edit":""),style:(null===(t=j[x])||void 0===t?void 0:t.backgroundImage)?{backgroundImage:"url(".concat(null===(n=j[x])||void 0===n?void 0:n.backgroundImage,")"),backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"contain"}:{},children:[Object(c.jsx)(w.a,{backend:C.a,children:v?Object(c.jsx)(N,{pane:d[null!==(i=null===(s=j[x])||void 0===s?void 0:s.pane)&&void 0!==i?i:d.length-1],editPane:g}):Object(c.jsx)(m,{notes:Object.values(d[null!==(r=null===(o=j[x])||void 0===o?void 0:o.pane)&&void 0!==r?r:d.length-1])})}),Object(c.jsx)(u,{contents:j.map((function(e){return e.dialog})),pos:x,updatePos:h})]})]})}function M(e){var t=e.dispatchEditMessage,n=Object(a.useState)({text:"",blanks:1,lines:0,allowEmpty:!1,allowEmptyLine:!1}),i=Object(l.a)(n,2),s=i[0],r=i[1];return Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{children:[Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{type:"number",value:(s.blanks||0).toString(),onChange:function(e){r(Object.assign({},s,{blanks:parseInt(e.target.value)}))}}),"\u9023\u7d9a\u7a7a\u884c\u3067\u6bb5\u843d\u3068\u307f\u306a\u3059"]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{type:"number",value:(s.lines||0).toString(),onChange:function(e){r(Object.assign({},s,{lines:parseInt(e.target.value)}))}}),"\u8907\u6570\u884c\u3092\u6bb5\u843d\u3068\u307f\u306a\u3059"]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{type:"checkbox",checked:s.allowEmpty,onChange:function(e){r(Object.assign({},s,{allowEmpty:e.target.checked}))}}),"\u7a7a\u306e\u8981\u7d20\u3092\u8a31\u5bb9\u3059\u308b"]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{type:"checkbox",checked:s.allowEmptyLine,onChange:function(e){r(Object.assign({},s,{allowEmptyLine:e.target.checked}))}}),"\u7a7a\u884c\u3092\u8a31\u5bb9\u3059\u308b"]})]}),Object(c.jsx)("textarea",{value:s.text,onChange:function(e){r(Object.assign({},s,{text:e.target.value}))}}),Object(c.jsx)("button",{onClick:function(){return t({type:"edit",snapshot:Object.assign({pos:0,pages:[],panes:[[]]},{pages:(e=s,S(e).map((function(e){return{dialog:e}})))}),message:"\u30d7\u30ec\u30fc\u30f3\u30c6\u30ad\u30b9\u30c8\u304b\u3089\u8aad\u307f\u8fbc\u307f \u7a7a\u884c\u6570: ".concat(s.blanks,", \u884c\u6570: ").concat(s.lines,", \u7a7a\u8981\u7d20\u8a31\u5bb9: ").concat(s.allowEmpty,", \u7a7a\u884c\u8a31\u5bb9: ").concat(s.allowEmptyLine,", \u30c6\u30ad\u30b9\u30c8: ").concat(s.text.slice(0,20))});var e},children:"\u8aad\u307f\u8fbc\u307f"})]})}function S(e){var t=e.text,n=e.blanks,c=e.lines,a=e.allowEmpty,i=e.allowEmptyLine;var s=[t];return s=s.map((function(e){return e.replaceAll(/^[\f\r\t\v\u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+$/gm,"")})),n>0&&(s=s.flatMap((function(e){return function(e,t){return e.split(RegExp("\n{"+(t+1)+",}"))}(e,n)}))),i||(s=s.map((function(e){return e.replaceAll(/^\n/gm,"").replaceAll(/\n$/g,"")}))),c>0&&(s=s.flatMap((function(e){return function(e,t){for(var n=[],c=e.split("\n"),a=0;a<c.length;a+=t)n.push(c.slice(a,a+t).join("\n"));return n}(e,c)}))),a||(s=s.filter((function(e){return 0!==e.length&&!/^\s*$/.test(e)}))),s}function I(e){var t=e.dispatchEditMessage,n=Object(a.useState)("plain_text"),i=Object(l.a)(n,2),s=i[0],r=i[1];function o(e){var t;"plain_text"!==(t=e.target.value)&&"json"!==t||e.target.checked&&r(e.target.value)}return Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{hidden:!0,children:[Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{type:"radio",checked:"plain_text"===s,onChange:o,value:"plain_text"})," ","PlainText"]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{type:"radio",checked:"json"===s,onChange:o,value:"json"})," ","JSON"]})]}),Object(c.jsx)(P,{type:s,dispatchEditMessage:t})]})}function P(e){switch(e.type){case"plain_text":return Object(c.jsx)(M,{dispatchEditMessage:e.dispatchEditMessage});case"json":return Object(c.jsx)(R,{dispatchEditMessage:e.dispatchEditMessage});default:throw new Error}}function R(e){return Object(c.jsx)("textarea",{onChange:function(t){try{e.dispatchEditMessage({type:"edit",snapshot:JSON.parse(t.target.value),message:"JSON\u304b\u3089\u306e\u30ed\u30fc\u30c9"})}catch(n){}}})}function L(e){return Object(c.jsxs)("aside",{children:[Object(c.jsx)("h1",{children:"\u7de8\u96c6\u5c65\u6b74"}),Object(c.jsx)("ol",{className:"changelog",children:e.log.map((function(t,n){return Object(c.jsx)("li",{onClick:function(){e.dispatchJumpMessage({type:"jump",to:n})},children:t},n)}))})]})}var T=function(){var e=Object(a.useReducer)((function(e,t){switch(t.type){case"edit":var n=t.message,c=t.snapshot;return{stepNumber:e.history.length,history:e.history.concat({message:n,snapshot:c})};case"jump":return Object.assign({},e,{stepNumber:t.to})}}),{stepNumber:0,history:[{message:"\u65b0\u898f",snapshot:{pos:0,pages:[],panes:[[]]}}]}),t=Object(l.a)(e,2),n=t[0],i=t[1];return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)(I,{dispatchEditMessage:i}),Object(c.jsx)(E,Object(o.a)({dispatchEditMessage:i},n.history[n.stepNumber].snapshot)),Object(c.jsx)(L,{dispatchJumpMessage:i,log:n.history.map((function(e){return e.message}))})]})},A=function(e){e&&n.e(3).then(n.bind(null,393)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),i(e),s(e)}))};r.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(T,{})}),document.getElementById("root")),A()}},[[388,1,2]]]);
//# sourceMappingURL=main.cc6ac003.chunk.js.map