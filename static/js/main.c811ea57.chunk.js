(this.webpackJsonptetori=this.webpackJsonptetori||[]).push([[0],{382:function(e,t,n){},383:function(e,t,n){},384:function(e,t,n){},387:function(e,t,n){},388:function(e,t,n){"use strict";n.r(t);var c=n(1),a=(n(173),n(2)),s=n.n(a),i=n(88),r=n.n(i),o=(n(382),n(383),n(168)),l=n(21);n(384);function u(e){var t,n,s=e.contents,i=e.pos,r=e.updatePos,o=Object(a.useState)(!0),u=Object(l.a)(o,2),j=u[0],d=u[1];return Object(c.jsxs)("div",{className:"dialog",children:[Object(c.jsx)("button",{onClick:function(){return d(!j)},children:"Prev ".concat(j?"\u25b2":"\u25bc")}),Object(c.jsx)("p",{className:"previous-dialog",title:"\u30af\u30ea\u30c3\u30af\u3067\u524d\u3078",hidden:j,onClick:function(e){e.currentTarget.scrollTop=0,void 0!==s[i-1]&&r("\u30da\u30fc\u30b8".concat(i-1),{pos:i-1})},children:null!==(t=s[i-1])&&void 0!==t?t:"NA"}),Object(c.jsx)("p",{className:"next-dialog",title:"\u30af\u30ea\u30c3\u30af\u3067\u6b21\u3078",onClick:function(e){e.currentTarget.scrollTop=0,void 0!==s[i+1]&&r("\u30da\u30fc\u30b8".concat(i+1),{pos:i+1})},children:null!==(n=s[i])&&void 0!==n?n:"NA"})]})}var j=n(166),d=n(391),b=n(392);function p(e){var t=Object(a.useRef)(null),n=Object(a.useRef)(null);function s(t){t&&e.apply(t)}return Object(c.jsxs)("ul",{children:[Object(c.jsx)("li",{children:Object(c.jsxs)("label",{children:[Object(c.jsx)("button",{onClick:function(){var e,n=null===(e=t.current)||void 0===e?void 0:e.files;if(n){var c=n[0];if(c){var a=new FileReader;a.addEventListener("load",(function(){var e=this.result;"string"===typeof e&&s(e)})),a.readAsDataURL(c)}}},children:e.text}),Object(c.jsx)("input",{ref:t,type:"file",accept:"image/png,image/jpeg"})]})}),Object(c.jsx)("li",{children:Object(c.jsxs)("label",{children:[Object(c.jsx)("button",{onClick:function(){var e,t=null===(e=n.current)||void 0===e?void 0:e.value;t&&0!==t.length&&s(t)},children:e.text}),Object(c.jsx)("input",{ref:n,type:"text",placeholder:"https://..."})]})})]})}var x="text";function h(e){var t,n=e.note,s=e.index,i=e.remove,r=e.editNote,o=Object(d.a)({item:{x:n.x,y:n.y,id:s,type:x}}),u=Object(l.a)(o,2)[1],b=Object(a.useRef)();if(function(e){return"text"===e.type}(n))t=function(){return Object(c.jsx)("textarea",{value:n.text,onChange:function(e){return r({text:e.target.value})},className:"box",style:{width:n.w,height:n.h,zIndex:s}})};else{if(!function(e){return"image"===e.type}(n))throw new Error;t=function(){return Object(c.jsx)("div",{className:"box",draggable:!1,style:{width:n.w,height:n.h,zIndex:s,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundImage:"url(".concat(n.url,")")}})}}return Object(c.jsxs)("div",{className:"draggable-wrapper",style:{left:n.x,top:n.y},children:[Object(c.jsxs)("div",{className:"note-navigation",children:[Object(c.jsx)("div",{ref:u,className:"drag-handle",title:"\u30c9\u30e9\u30c3\u30b0\u3067\u52d5\u304b\u3059"}),Object(c.jsx)("button",{className:"close-button",onClick:i,title:"\u9589\u3058\u308b"})]}),Object(c.jsx)(j.a,{onResize:function(e){n.h===e.height&&n.w===e.width||(b.current&&clearTimeout(b.current),b.current=setTimeout((function(){r({h:e.height,w:e.width})}),1e3))},children:Object(c.jsx)(t,{})})]})}var g=function(){};function O(e){var t,n,a=null!==(t=e.remove)&&void 0!==t?t:g,s=null!==(n=e.editNote)&&void 0!==n?n:g;return Object(c.jsx)("div",{className:"pane",children:e.notes.map((function(e,t){return Object(c.jsx)(h,{index:t,note:e,remove:function(){return a(t)},editNote:function(e){return s(t,e)}},e.key)}))})}function f(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),s=n[0],i=n[1];return Object(c.jsxs)("aside",{className:"palette",children:[Object(c.jsx)("button",{onClick:function(){return i(!s)},children:"".concat(s?"\u958b\u304f":"\u6700\u5c0f\u5316")}),Object(c.jsx)("h1",{children:"\u30d1\u30ec\u30c3\u30c8"}),Object(c.jsxs)("ul",{hidden:s,children:[Object(c.jsx)("li",{onClick:function(){return e.createNote({type:"text",text:"",x:0,y:0,w:300,h:300})},children:"\u30c6\u30ad\u30b9\u30c8"}),Object(c.jsx)("li",{children:Object(c.jsx)(p,{text:"\u753b\u50cf",apply:function(t){var n=new Image;n.src=t,n.onload=function(){var c=n.naturalWidth,a=n.naturalHeight;c<=a?500<a&&(c=500*c/a,a=500):500<c&&(a=500*a/c,c=500),e.createNote({type:"image",url:t,x:0,y:0,h:a,w:c})}}})})]})]})}function v(){for(var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".split(""),t=0,n=e.length;t<n;t++)switch(e[t]){case"x":e[t]=Math.floor(16*Math.random()).toString(16);break;case"y":e[t]=(Math.floor(4*Math.random())+8).toString(16)}return e.join("")}function m(e){var t=e.pane,n=e.editPane,s=Object(a.useCallback)((function(e){n(t.concat([Object.assign({},e,{key:v()})]))}),[n,t]),i=Object(a.useCallback)((function(e,c){var a=t.slice(),s=Object.assign({},a.splice(e,1)[0],c);n(a.concat([s]))}),[n,t]),r=Object(a.useCallback)((function(e){var c=t.slice();c.splice(e,1),n(c)}),[n,t]),o=Object(b.a)({accept:[x],drop:function(e,t){var n=e.id,c=e.x,a=e.y,s=t.getDifferenceFromInitialOffset()||{x:0,y:0},r=s.x,o=s.y,l=Math.round(c+r),u=Math.round(a+o);i(n,{x:l,y:u})}}),u=Object(l.a)(o,2)[1];return Object(c.jsxs)("div",{className:"pane-editor",ref:u,children:[Object(c.jsx)(O,{notes:t,remove:r,editNote:i}),Object(c.jsx)(f,{createNote:s})]})}var y=n(390),k=n(167);n(387);function w(e){var t,n,s,i,r,o,j=e.panes,d=e.pages,b=e.dispatchEditMessage,x=e.pos,h=Object(a.useCallback)((function(e,t){var n=t.pos,c=t.pane,a=t.page,s=Object.assign({},d[x],a),i=d.slice();i[x]=s,b({type:"edit",message:e,snapshot:{pages:i,panes:c?j.concat([c]):j,pos:null!==n&&void 0!==n?n:x}})}),[b,d,j,x]),g=Object(a.useCallback)((function(e){return h("Pane\u306e\u7de8\u96c6",{page:{pane:j.length},pane:e})}),[j.length,h]),f=Object(a.useState)(!0),v=Object(l.a)(f,2),w=v[0],N=v[1];return Object(c.jsxs)("div",{children:[Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{type:"checkbox",checked:w,onChange:function(e){return N(e.target.checked)}}),"\u7de8\u96c6\u30e2\u30fc\u30c9"]}),Object(c.jsx)(p,{apply:function(e){h("\u80cc\u666f\u753b\u50cf\u3092\u8a2d\u5b9a",{page:{backgroundImage:e}})},text:"\u80cc\u666f\u753b\u50cf"}),Object(c.jsxs)("div",{className:"tetori ".concat(w?"edit":""),style:(null===(t=d[x])||void 0===t?void 0:t.backgroundImage)?{backgroundImage:"url(".concat(null===(n=d[x])||void 0===n?void 0:n.backgroundImage,")"),backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"contain"}:{},children:[Object(c.jsx)(y.a,{backend:k.a,children:w?Object(c.jsx)(m,{pane:j[null!==(s=null===(i=d[x])||void 0===i?void 0:i.pane)&&void 0!==s?s:j.length-1],editPane:g}):Object(c.jsx)(O,{notes:Object.values(j[null!==(r=null===(o=d[x])||void 0===o?void 0:o.pane)&&void 0!==r?r:j.length-1])})}),Object(c.jsx)(u,{contents:d.map((function(e){return e.dialog})),pos:x,updatePos:h})]})]})}function N(e){var t=e.dispatchEditMessage,n=Object(a.useState)({text:"",blanks:1,lines:0,allowEmpty:!1,allowEmptyLine:!1}),s=Object(l.a)(n,2),i=s[0],r=s[1];return Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{children:[Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{type:"number",value:(i.blanks||0).toString(),onChange:function(e){r(Object.assign({},i,{blanks:parseInt(e.target.value)}))}}),"\u9023\u7d9a\u7a7a\u884c\u3067\u6bb5\u843d\u3068\u307f\u306a\u3059"]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{type:"number",value:(i.lines||0).toString(),onChange:function(e){r(Object.assign({},i,{lines:parseInt(e.target.value)}))}}),"\u8907\u6570\u884c\u3092\u6bb5\u843d\u3068\u307f\u306a\u3059"]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{type:"checkbox",checked:i.allowEmpty,onChange:function(e){r(Object.assign({},i,{allowEmpty:e.target.checked}))}}),"\u7a7a\u306e\u8981\u7d20\u3092\u8a31\u5bb9\u3059\u308b"]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{type:"checkbox",checked:i.allowEmptyLine,onChange:function(e){r(Object.assign({},i,{allowEmptyLine:e.target.checked}))}}),"\u7a7a\u884c\u3092\u8a31\u5bb9\u3059\u308b"]})]}),Object(c.jsx)("textarea",{value:i.text,onChange:function(e){r(Object.assign({},i,{text:e.target.value}))}}),Object(c.jsx)("button",{onClick:function(){return t({type:"edit",snapshot:Object.assign({pos:0,pages:[],panes:[[]]},{pages:(e=i,C(e).map((function(e){return{dialog:e}})))}),message:"\u30d7\u30ec\u30fc\u30f3\u30c6\u30ad\u30b9\u30c8\u304b\u3089\u8aad\u307f\u8fbc\u307f \u7a7a\u884c\u6570: ".concat(i.blanks,", \u884c\u6570: ").concat(i.lines,", \u7a7a\u8981\u7d20\u8a31\u5bb9: ").concat(i.allowEmpty,", \u7a7a\u884c\u8a31\u5bb9: ").concat(i.allowEmptyLine,", \u30c6\u30ad\u30b9\u30c8: ").concat(i.text.slice(0,20))});var e},children:"\u8aad\u307f\u8fbc\u307f"})]})}function C(e){var t=e.text,n=e.blanks,c=e.lines,a=e.allowEmpty,s=e.allowEmptyLine;var i=[t];return i=i.map((function(e){return e.replaceAll(/^[\f\r\t\v\u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+$/gm,"")})),n>0&&(i=i.flatMap((function(e){return function(e,t){return e.split(RegExp("\n{"+(t+1)+",}"))}(e,n)}))),s||(i=i.map((function(e){return e.replaceAll(/^\n/gm,"").replaceAll(/\n$/g,"")}))),c>0&&(i=i.flatMap((function(e){return function(e,t){for(var n=[],c=e.split("\n"),a=0;a<c.length;a+=t)n.push(c.slice(a,a+t).join("\n"));return n}(e,c)}))),a||(i=i.filter((function(e){return 0!==e.length&&!/^\s*$/.test(e)}))),i}function E(e){var t=e.dispatchEditMessage,n=Object(a.useState)("plain_text"),s=Object(l.a)(n,2),i=s[0],r=s[1];function o(e){var t;"plain_text"!==(t=e.target.value)&&"json"!==t||e.target.checked&&r(e.target.value)}return Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{hidden:!0,children:[Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{type:"radio",checked:"plain_text"===i,onChange:o,value:"plain_text"})," ","PlainText"]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{type:"radio",checked:"json"===i,onChange:o,value:"json"})," ","JSON"]})]}),Object(c.jsx)(M,{type:i,dispatchEditMessage:t})]})}function M(e){switch(e.type){case"plain_text":return Object(c.jsx)(N,{dispatchEditMessage:e.dispatchEditMessage});case"json":return Object(c.jsx)(S,{dispatchEditMessage:e.dispatchEditMessage});default:throw new Error}}function S(e){return Object(c.jsx)("textarea",{onChange:function(t){try{e.dispatchEditMessage({type:"edit",snapshot:JSON.parse(t.target.value),message:"JSON\u304b\u3089\u306e\u30ed\u30fc\u30c9"})}catch(n){}}})}function I(e){return Object(c.jsxs)("aside",{children:[Object(c.jsx)("h1",{children:"\u7de8\u96c6\u5c65\u6b74"}),Object(c.jsx)("ol",{className:"changelog",children:e.log.map((function(t,n){return Object(c.jsx)("li",{onClick:function(){e.dispatchJumpMessage({type:"jump",to:n})},children:t},n)}))})]})}var P=function(){var e=Object(a.useReducer)((function(e,t){switch(t.type){case"edit":var n=t.message,c=t.snapshot;return{stepNumber:e.history.length,history:e.history.concat({message:n,snapshot:c})};case"jump":return Object.assign({},e,{stepNumber:t.to})}}),{stepNumber:0,history:[{message:"\u65b0\u898f",snapshot:{pos:0,pages:[],panes:[[]]}}]}),t=Object(l.a)(e,2),n=t[0],s=t[1];return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)(E,{dispatchEditMessage:s}),Object(c.jsx)(w,Object(o.a)({dispatchEditMessage:s},n.history[n.stepNumber].snapshot)),Object(c.jsx)(I,{dispatchJumpMessage:s,log:n.history.map((function(e){return e.message}))})]})},R=function(e){e&&n.e(3).then(n.bind(null,393)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),s(e),i(e)}))};r.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(P,{})}),document.getElementById("root")),R()}},[[388,1,2]]]);
//# sourceMappingURL=main.c811ea57.chunk.js.map